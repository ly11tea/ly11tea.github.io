<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="HTTP
超文本传输协议(HTTP)是一种通信协议，它允许将超文本标记语言(HTML)文档从Web服务器传送到客户端的浏览器.">
<meta property="og:type" content="article">
<meta property="og:title" content="http 协议笔记">
<meta property="og:url" content="https://ly11tea.github.io/2016/10/21/http-协议笔记/index.html">
<meta property="og:site_name" content="Luo's blog">
<meta property="og:description" content="HTTP
超文本传输协议(HTTP)是一种通信协议，它允许将超文本标记语言(HTML)文档从Web服务器传送到客户端的浏览器.">
<meta property="og:image" content="https://ly11tea.github.io/images/http_protcool/1.PNG">
<meta property="og:image" content="https://ly11tea.github.io/images/http_protcool/2.PNG">
<meta property="og:image" content="https://ly11tea.github.io/images/http_protcool/3.PNG">
<meta property="og:image" content="https://ly11tea.github.io/images/http_protcool/4.PNG">
<meta property="og:image" content="https://ly11tea.github.io/images/http_protcool/5.PNG">
<meta property="og:updated_time" content="2016-10-21T16:01:17.935Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="http 协议笔记">
<meta name="twitter:description" content="HTTP
超文本传输协议(HTTP)是一种通信协议，它允许将超文本标记语言(HTML)文档从Web服务器传送到客户端的浏览器.">
<meta name="twitter:image" content="https://ly11tea.github.io/images/http_protcool/1.PNG">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="https://ly11tea.github.io/2016/10/21/http-协议笔记/"/>

  <title> http 协议笔记 | Luo's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?ee6095b761314f862c509f6d3d27dad6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Luo's blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-episode">
          <a href="/categories/短/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-comment-o"></i> <br />
            
            短
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                http 协议笔记
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-21T20:04:42+08:00" content="2016-10-21">
              2016-10-21
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/21/http-协议笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/21/http-协议笔记/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><blockquote>
<p>超文本传输协议(HTTP)是一种通信协议，它允许将超文本标记语言(HTML)文档从Web服务器传送到客户端的浏览器.<br><a id="more"></a> </p>
</blockquote>
<p>例如,最简单的一个页面的浏览过程:<br>我们输入URL后，我们的浏览器给Web服务器发送了一个Request, Web服务器接到Request后进行处理，生成相应的Response，然后发送给浏览器， 浏览器解析Response中的HTML,这样我们就看到了网页.<br><img src="/images/http_protcool/1.PNG" style="width: 300px;"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Client-&gt;Server: Request(get)</div><div class="line"></div><div class="line">Server--&gt;Client:Response(body中为html网页)</div></pre></td></tr></table></figure>
<h1 id="URL格式"><a href="#URL格式" class="headerlink" title="URL格式"></a>URL格式</h1><blockquote>
<p>schema://host[:port#]/path/…/[?query-string][#anchor]</p>
</blockquote>
<table>
<thead>
<tr>
<th>字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>scheme</td>
<td>指定低层使用的协议(例如：http, https, ftp)</td>
</tr>
<tr>
<td>host</td>
<td>HTTP服务器的IP地址或者域名</td>
</tr>
<tr>
<td>port</td>
<td>HTTP服务器的默认端口是80，这种情况下端口号可以省略。如果使用了别的端口，必须指明，例如 <a href="http://www.cnblogs.com:8080/" target="_blank" rel="external">http://www.cnblogs.com:8080/</a></td>
</tr>
<tr>
<td>path</td>
<td>访问资源的路径</td>
</tr>
<tr>
<td>query-string</td>
<td>发送给http服务器的数据</td>
</tr>
<tr>
<td>anchor-</td>
<td>锚</td>
</tr>
</tbody>
</table>
<p>例如:<a href="http://www.mywebsite.com/sj/test/test.aspx?name=sviergn&amp;x=true#stuff" target="_blank" rel="external">http://www.mywebsite.com/sj/test/test.aspx?name=sviergn&amp;x=true#stuff</a><br>Schema:                 http<br>host:                   www.mywebsite.com<br>path:                   /sj/test/test.aspx<br>Query String:           name=sviergn&amp;x=true<br>Anchor:                 stuff</p>
<h1 id="http的request消息结构"><a href="#http的request消息结构" class="headerlink" title="http的request消息结构"></a>http的request消息结构</h1><p>request有三部分:<br>1.Request line<br>2.Request header<br>3.body</p>
<table>
<thead>
<tr>
<th>Request line</th>
<th>Request header</th>
<th style="text-align:center">body</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td>Cache 头域:If-Modified-Since,If-None-Match,Pragma</td>
</tr>
<tr>
<td>Path-to-resoure</td>
<td>Client 头域:Accept,Accept-Encoding,Accept-Language,User-Agent,Accept-Charset</td>
</tr>
<tr>
<td>Http/version-number</td>
<td>Cookie/Login 头域 Cookie</td>
</tr>
<tr>
<td></td>
<td>Entity头域:Content-Length,Content-Type</td>
</tr>
<tr>
<td></td>
<td>Miscellaneous 头域:Referer</td>
</tr>
<tr>
<td></td>
<td>Transport 头域:Connection,Host</td>
</tr>
</tbody>
</table>
<h2 id="Request-line"><a href="#Request-line" class="headerlink" title="Request line"></a>Request line</h2><p>Method表示请求方法,比如”POST”,”GET”, </p>
<blockquote>
<p>HTTP中的GET, POST, PUT, DELETE就对应着对这个资源的查，改，增，删4个操作。 我们最常见的就是GET和POST了。GET一般用于获取/查询资源信息，而POST一般用于更新资源信息.</p>
<ol>
<li>GET提交的数据会放在URL之后，以?分割URL和传输数据，参数之间以&amp;相连，如EditPosts.aspx?name=test1&amp;id=123456.  POST方法是把提交的数据放在HTTP包的Body中.</li>
<li>GET提交的数据大小有限制（因为浏览器对URL的长度有限制），而POST方法提交的数据没有限制.</li>
<li>GET方式需要使用Request.QueryString来取得变量的值，而POST方式通过Request.Form来获取变量的值。</li>
<li>GET方式提交数据，会带来安全问题，比如一个登录页面，通过GET方式提交数据时，用户名和密码将出现在URL上，如果页面可以被缓存或者其他人可以访问这台机器，就可以从历史记录获得该用户的账号和密码.</li>
</ol>
</blockquote>
<p>Path-to-resoure表示请求的资源，<br>Http/version-number 表示HTTP协议的版本号</p>
<h2 id="Request-header"><a href="#Request-header" class="headerlink" title="Request header"></a>Request header</h2><h3 id="Cache-头域"><a href="#Cache-头域" class="headerlink" title="Cache 头域"></a>Cache 头域</h3><h4 id="If-Modified-Since"><a href="#If-Modified-Since" class="headerlink" title="If-Modified-Since"></a>If-Modified-Since</h4><p>作用： 把浏览器端缓存页面的最后修改时间发送到服务器去，服务器会把这个时间与服务器上实际文件的最后修改时间进行对比。如果时间一致，那么返回304，客户端 就直接使用本地缓存文件。如果时间不一致，就会返回200和新的文件内容。客户端接到之后，会丢弃旧文件，把新文件缓存起来，并显示在浏览器中.</p>
<p>例如：If-Modified-Since: Thu, 09 Feb 2012 09:07:57 GMT</p>
<h4 id="If-None-Match"><a href="#If-None-Match" class="headerlink" title="If-None-Match"></a>If-None-Match</h4><p>作用: If-None-Match和ETag一起工作，工作原理是在HTTP Response中添加ETag信息。 当用户再次请求该资源时，将在HTTP Request 中加入If-None-Match信息(ETag的值)。如果服务器验证资源的ETag没有改变（该资源没有更新），将返回一个304状态告诉客户端使用 本地缓存文件。否则将返回200状态和新的资源和Etag.  使用这样的机制将提高网站的性能</p>
<p>例如: If-None-Match: “03f2b33c0bfcc1:0”</p>
<h4 id="Pragma"><a href="#Pragma" class="headerlink" title="Pragma"></a>Pragma</h4><p>作用： 防止页面被缓存， 在HTTP/1.1版本中，它和Cache-Control:no-cache作用一模一样</p>
<p>Pargma只有一个用法， 例如： Pragma: no-cache</p>
<p>注意: 在HTTP/1.0版本中，只实现了Pragema:no-cache, 没有实现Cache-Control</p>
<h4 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h4><p>作用: 这个是非常重要的规则。 这个用来指定Response-Request遵循的缓存机制。各个指令含义如下</p>
<p>Cache-Control:Public   可以被任何缓存所缓存（）</p>
<p>Cache-Control:Private     内容只缓存到私有缓存中</p>
<p>Cache-Control:no-cache  所有内容都不会被缓存</p>
<h3 id="Client-头域"><a href="#Client-头域" class="headerlink" title="Client 头域"></a>Client 头域</h3><h4 id="Accept"><a href="#Accept" class="headerlink" title="Accept"></a>Accept</h4><p>作用： 浏览器端可以接受的媒体类型,</p>
<p>例如：  Accept: text/html  代表浏览器可以接受服务器回发的类型为 text/html  也就是我们常说的html文档,</p>
<p>如果服务器无法返回text/html类型的数据,服务器应该返回一个406错误(non acceptable)</p>
<p>通配符 * 代表任意类型</p>
<p>例如  Accept: <em>/</em>  代表浏览器可以处理所有类型,(一般浏览器发给服务器都是发这个)</p>
<h6 id="Accept-Encoding："><a href="#Accept-Encoding：" class="headerlink" title="Accept-Encoding："></a>Accept-Encoding：</h6><p>作用： 浏览器申明自己接收的编码方法，通常指定压缩方法，是否支持压缩，支持什么压缩方法（gzip，deflate），（注意：这不是只字符编码）;</p>
<p>例如： Accept-Encoding: gzip, deflate</p>
<h5 id="Accept-Language"><a href="#Accept-Language" class="headerlink" title="Accept-Language"></a>Accept-Language</h5><p>作用： 浏览器申明自己接收的语言。 </p>
<p>语言跟字符集的区别：中文是语言，中文有多种字符集，比如big5，gb2312，gbk等等；</p>
<p>例如： Accept-Language: en-us</p>
<h5 id="User-Agent"><a href="#User-Agent" class="headerlink" title="User-Agent"></a>User-Agent</h5><p>作用：告诉HTTP服务器， 客户端使用的操作系统和浏览器的名称和版本.</p>
<p>我们上网登陆论坛的时候，往往会看到一些欢迎信息，其中列出了你的操作系统的名称和版本，你所使用的浏览器的名称和版本，这往往让很多人感到很神 奇，实际上，服务器应用程序就是从User-Agent这个请求报头域中获取到这些信息User-Agent请求报头域允许客户端将它的操作系统、浏览器 和其它属性告诉服务器。</p>
<p>例如： User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; CIBA; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; InfoPath.2; .NET4.0E)</p>
<h5 id="Accept-Charset"><a href="#Accept-Charset" class="headerlink" title="Accept-Charset"></a>Accept-Charset</h5><p>作用：浏览器申明自己接收的字符集，这就是本文前面介绍的各种字符集和字符编码，如gb2312，utf-8（通常我们说Charset包括了相应的字符编码方案）；</p>
<p>例如：</p>
<h4 id="Cookie-Login-头域"><a href="#Cookie-Login-头域" class="headerlink" title="Cookie/Login 头域"></a>Cookie/Login 头域</h4><h5 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie:"></a>Cookie:</h5><p>作用： 最重要的header, 将cookie的值发送给HTTP 服务器</p>
<h3 id="Entity头域"><a href="#Entity头域" class="headerlink" title="Entity头域"></a>Entity头域</h3><h4 id="Content-Length"><a href="#Content-Length" class="headerlink" title="Content-Length"></a>Content-Length</h4><p>作用：发送给HTTP服务器数据的长度。</p>
<p>例如： Content-Length: 38</p>
<h4 id="Content-Type"><a href="#Content-Type" class="headerlink" title="Content-Type"></a>Content-Type</h4><p>作用：</p>
<p>例如：Content-Type: application/x-www-form-urlencoded</p>
<h5 id="Miscellaneous-头域"><a href="#Miscellaneous-头域" class="headerlink" title="Miscellaneous 头域"></a>Miscellaneous 头域</h5><h5 id="Referer"><a href="#Referer" class="headerlink" title="Referer:"></a>Referer:</h5><p>作用： 提供了Request的上下文信息的服务器，告诉服务器我是从哪个链接过来的，比如从我主页上链接到一个朋友那里，他的服务器就能够从HTTP Referer中统计出每天有多少用户点击我主页上的链接访问他的网站。</p>
<p>例如: Referer:<a href="http://translate.google.cn/?hl=zh-cn&amp;tab=wT" target="_blank" rel="external">http://translate.google.cn/?hl=zh-cn&amp;tab=wT</a></p>
<h3 id="Transport-头域"><a href="#Transport-头域" class="headerlink" title="Transport 头域"></a>Transport 头域</h3><h4 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h4><p>例如：　Connection: keep-alive   当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建立的连接</p>
<p>例如：  Connection: close  代表一个Request完成后，客户端和服务器之间用于传输HTTP数据的TCP连接会关闭， 当客户端再次发送Request，需要重新建立TCP连接。</p>
<h4 id="Host（发送请求时，该报头域是必需的）"><a href="#Host（发送请求时，该报头域是必需的）" class="headerlink" title="Host（发送请求时，该报头域是必需的）"></a>Host（发送请求时，该报头域是必需的）</h4><p>作用: 请求报头域主要用于指定被请求资源的Internet主机和端口号，它通常从HTTP URL中提取出来的</p>
<p>例如: 我们在浏览器中输入：<a href="http://www.guet.edu.cn/index.html" target="_blank" rel="external">http://www.guet.edu.cn/index.html</a></p>
<p>浏览器发送的请求消息中，就会包含Host请求报头域，如下：</p>
<p>Host：<a href="http://www.guet.edu.cn" target="_blank" rel="external">http://www.guet.edu.cn</a></p>
<p>此处使用缺省端口号80，若指定了端口号，则变成：Host：指定端口号</p>
<h1 id="http的reponse消息结构"><a href="#http的reponse消息结构" class="headerlink" title="http的reponse消息结构"></a>http的reponse消息结构</h1><p>分为三部分,第一部分叫Response line, 第二部分叫Response header，第三部分是body</p>
<table>
<thead>
<tr>
<th>reponse line</th>
<th>Response header</th>
<th style="text-align:center">body</th>
</tr>
</thead>
<tbody>
<tr>
<td>HTTP/version-number</td>
<td>Cache头域:Date,Expires,Vary</td>
</tr>
<tr>
<td>status-code</td>
<td>Cookie/Login 头域:P3P,Set-Cookie</td>
</tr>
<tr>
<td>message</td>
<td>Entity头域:ETag,Last-Modified,Content-Type,Content-Length,Content-Encoding,Content-Language</td>
</tr>
<tr>
<td></td>
<td>Miscellaneous 头域:Server,X-AspNet-Version,X-Powered-By:</td>
</tr>
<tr>
<td></td>
<td>Transport头域:Connection</td>
</tr>
<tr>
<td></td>
<td>Location头域:Location</td>
</tr>
</tbody>
</table>
<h2 id="reponse-line"><a href="#reponse-line" class="headerlink" title="reponse line"></a>reponse line</h2><p>HTTP/version-number表示HTTP协议的版本号，  status-code 和message分别是状态代码和状态信息</p>
<h2 id="Response-header"><a href="#Response-header" class="headerlink" title="Response header"></a>Response header</h2><h3 id="Cache头域"><a href="#Cache头域" class="headerlink" title="Cache头域"></a>Cache头域</h3><h4 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h4><p>作用:  生成消息的具体时间和日期</p>
<p>例如：　Date: Sat, 11 Feb 2012 11:35:14 GMT </p>
<h4 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h4><p>作用: 浏览器会在指定过期时间内使用本地缓存</p>
<p>例如: Expires: Tue, 08 Feb 2022 11:35:14 GMT</p>
<h4 id="Vary"><a href="#Vary" class="headerlink" title="Vary"></a>Vary</h4><p>作用：</p>
<p>例如: Vary: Accept-Encoding</p>
<h3 id="Cookie-Login-头域-1"><a href="#Cookie-Login-头域-1" class="headerlink" title="Cookie/Login 头域"></a>Cookie/Login 头域</h3><h4 id="P3P"><a href="#P3P" class="headerlink" title="P3P"></a>P3P</h4><p>作用: 用于跨域设置Cookie, 这样可以解决iframe跨域访问cookie的问题</p>
<p>例如: P3P: CP=CURa ADMa DEVa PSAo PSDo OUR BUS UNI PUR INT DEM STA PRE COM NAV OTC NOI DSP COR</p>
<h4 id="Set-Cookie"><a href="#Set-Cookie" class="headerlink" title="Set-Cookie"></a>Set-Cookie</h4><p>作用： 非常重要的header, 用于把cookie 发送到客户端浏览器， 每一个写入cookie都会生成一个Set-Cookie.</p>
<p>例如: Set-Cookie: sc=4c31523a; path=/; domain=.acookie.taobao.com</p>
<h3 id="Entity头域-1"><a href="#Entity头域-1" class="headerlink" title="Entity头域"></a>Entity头域</h3><h4 id="ETag"><a href="#ETag" class="headerlink" title="ETag"></a>ETag</h4><p>作用:  和If-None-Match 配合使用。 （实例请看上节中If-None-Match的实例）</p>
<p>例如: ETag: “03f2b33c0bfcc1:0”</p>
<h4 id="Last-Modified"><a href="#Last-Modified" class="headerlink" title="Last-Modified:"></a>Last-Modified:</h4><p>作用： 用于指示资源的最后修改日期和时间。（实例请看上节的If-Modified-Since的实例）</p>
<p>例如: Last-Modified: Wed, 21 Dec 2011 09:09:10 GMT</p>
<h4 id="Content-Type-1"><a href="#Content-Type-1" class="headerlink" title="Content-Type"></a>Content-Type</h4><p>作用：WEB服务器告诉浏览器自己响应的对象的类型和字符集,</p>
<p>例如:</p>
<p>Content-Type: text/html; charset=utf-8</p>
<p>Content-Type:text/html;charset=GB2312</p>
<p>Content-Type: image/jpeg</p>
<h4 id="Content-Length-1"><a href="#Content-Length-1" class="headerlink" title="Content-Length"></a>Content-Length</h4><p>指明实体正文的长度，以字节方式存储的十进制数字来表示。在数据下行的过程中，Content-Length的方式要预先在服务器中缓存所有数据，然后所有数据再一股脑儿地发给客户端。</p>
<p>例如: Content-Length: 19847</p>
<p>####Content-Encoding</p>
<p>WEB服务器表明自己使用了什么压缩方法（gzip，deflate）压缩响应中的对象。</p>
<p>例如：Content-Encoding：gzip</p>
<p>####Content-Language</p>
<p>作用： WEB服务器告诉浏览器自己响应的对象的语言者</p>
<p>例如： Content-Language:da</p>
<h3 id="Miscellaneous-头域-1"><a href="#Miscellaneous-头域-1" class="headerlink" title="Miscellaneous 头域"></a>Miscellaneous 头域</h3><h4 id="Server"><a href="#Server" class="headerlink" title="Server:"></a>Server:</h4><p>作用：指明HTTP服务器的软件信息</p>
<p>例如:Server: Microsoft-IIS/7.5</p>
<h4 id="X-AspNet-Version"><a href="#X-AspNet-Version" class="headerlink" title="X-AspNet-Version:"></a>X-AspNet-Version:</h4><p>作用：如果网站是用ASP.NET开发的，这个header用来表示ASP.NET的版本</p>
<p>例如: X-AspNet-Version: 4.0.30319</p>
<h4 id="X-Powered-By"><a href="#X-Powered-By" class="headerlink" title="X-Powered-By:"></a>X-Powered-By:</h4><p>作用：表示网站是用什么技术开发的</p>
<p>例如： X-Powered-By: ASP.NET</p>
<h3 id="Transport头域"><a href="#Transport头域" class="headerlink" title="Transport头域"></a>Transport头域</h3><h4 id="Connection-1"><a href="#Connection-1" class="headerlink" title="Connection"></a>Connection</h4><p>例如：　Connection: keep-alive   当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建立的连接</p>
<p>例如：  Connection: close  代表一个Request完成后，客户端和服务器之间用于传输HTTP数据的TCP连接会关闭， 当客户端再次发送Request，需要重新建立TCP连接。</p>
<h3 id="Location头域"><a href="#Location头域" class="headerlink" title="Location头域"></a>Location头域</h3><h4 id="Location"><a href="#Location" class="headerlink" title="Location"></a>Location</h4><p>作用： 用于重定向一个新的位置, 包含新的URL地址</p>
<p> 实例请看304状态实例</p>
<h1 id="Http认证"><a href="#Http认证" class="headerlink" title="Http认证"></a>Http认证</h1><p>桌面应用程序也通过HTTP协议跟Web服务器交互，桌面应用程序一般不会使用cookie, 而是把”<strong>用户名+冒号+密码”用BASE64编码的字符串放在htp request 中的header Authorization</strong>中发送给服务端，这种方式叫HTTP基本认证(Basic Authentication)<br>第一步:  客户端发送http request 给服务器，<br>第二步:  因为request中没有包含Authorization header,  服务器会返回一个401 Unauthozied 给客户端，并且在Response 的 header “WWW-Authenticate” 中添加信息。<br>第三步：客户端把用户名和密码用BASE64编码后，放在Authorization header中发送给服务器， 认证成功。<br>第四步：服务器将Authorization header中的用户名密码取出，进行验证， 如果验证通过，将根据请求，发送资源给客户端</p>
<p><strong>HTTP基本认证要和HTTPS结合在一起,</strong>否则的话密码会轻易地被读取出来</p>
<h2 id="HTTP-OAuth认证"><a href="#HTTP-OAuth认证" class="headerlink" title="HTTP OAuth认证"></a>HTTP OAuth认证</h2><p>OAuth 对于Http来说，就是放在Authorization header中的不是用户名密码， 而是一个token.</p>
<h1 id="HTTP内容编码和压缩"><a href="#HTTP内容编码和压缩" class="headerlink" title="HTTP内容编码和压缩"></a>HTTP内容编码和压缩</h1><p> 在http协议中，可以对内容（也就是body部分）进行编码,起到混淆内容或者压缩的目的,而如果使用压缩编码进行编码,那么就称为http压缩</p>
<h2 id="内容编码类型"><a href="#内容编码类型" class="headerlink" title="内容编码类型"></a>内容编码类型</h2><p> HTTP定义了一些标准的内容编码类型，并允许用扩展的形式添加更多的编码。<br>response中的content type域的Content-Encoding header说明编码时使用的算法</p>
<p>Content-Encoding值</p>
<p>gzip　　表明实体采用GNU zip编码</p>
<p>compress 表明实体采用Unix的文件压缩程序</p>
<p>deflate　　表明实体是用zlib的格式压缩的</p>
<p>identity　　表明没有对实体进行编码。当没有Content-Encoding header时， 就默认为这种情况</p>
<p>gzip, compress, 以及deflate编码都是无损压缩算法，用于减少传输报文的大小，不会导致信息损失。 其中gzip通常效率最高， 使用最为广泛。</p>
<h2 id="压缩的步骤"><a href="#压缩的步骤" class="headerlink" title="压缩的步骤"></a>压缩的步骤</h2><ol>
<li><p>浏览器发送Http request 给Web服务器,  request 中有Accept-Encoding: gzip, deflate。 (告诉服务器， 浏览器支持gzip压缩)</p>
</li>
<li><p>Web服务器接到request后， 生成原始的Response, 其中有原始的Content-Type和Content-Length。</p>
</li>
<li><p>Web服务器通过Gzip，来对Response进行编码， 编码后header中有Content-Type和Content-Length(压缩后的大小)， 并且增加了Content-Encoding:gzip.  然后把Response发送给浏览器。</p>
</li>
<li><p>浏览器接到Response后，根据Content-Encoding:gzip来对Response 进行解码。 获取到原始response后， 然后显示出网页。</p>
</li>
</ol>
<h1 id="http缓存"><a href="#http缓存" class="headerlink" title="http缓存"></a>http缓存</h1><p>http缓存是指:当Web请求抵达缓存时，如果本地有“已缓存的”副本，就可以从本地存储设备而不是从原始服务器中提取这个文档。</p>
<h2 id="判断缓存新鲜度"><a href="#判断缓存新鲜度" class="headerlink" title="判断缓存新鲜度"></a>判断缓存新鲜度</h2><p>共有两种方法:</p>
<ol>
<li>浏览器把缓存文件的最后修改时间通过 header ”If-Modified-Since“来告诉Web服务器。</li>
<li>浏览器把缓存文件的ETag, 通过header “If-None-Match”, 来告诉Web服务器。</li>
</ol>
<p>###　通过最后修改时间, 来判断缓存新鲜度</p>
<ol>
<li><p>浏览器客户端想请求一个文档，  首先检查本地缓存，发现存在这个文档的缓存，  获取缓存中文档的最后修改时间，通过： <strong>If-Modified-Since，</strong> 发送Request给Web服务器。</p>
</li>
<li><p>Web服务器收到Request，将服务器的<strong>文档修改时间（Last-Modified）: 跟request header 中的，If-Modified-Since相比较，</strong> 如果时间是一样的， 说明缓存还是最新的， Web服务器将发送<strong>304 Not Modified给浏览器客户端，</strong> 告诉客户端直接使用缓存里的版本。如下图。</p>
</li>
</ol>
<p><img src="/images/http_protcool/2.PNG" style="width: 300px;"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Client-&gt;Cache:</div><div class="line">Cache-&gt;Server:</div><div class="line">Note right of Server: 检查新鲜度</div><div class="line">Server--&gt;Cache:缓存已是最新</div><div class="line">Cache--&gt;Client:使用缓存</div></pre></td></tr></table></figure>
<p><img src="/images/http_protcool/3.PNG" style="width: 300px;"></p>
<p>3.假如该文档已经被更新了。Web服务器将发送该文档的最新版本给浏览器客户端， 如下图。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Client-&gt;Cache:</div><div class="line">Cache-&gt;Server:</div><div class="line">Note right of Server: 检查新鲜度</div><div class="line">Server--&gt;Cache:缓存不是最新,发送最新内容</div><div class="line">Cache--&gt;Client:使用最新内容</div></pre></td></tr></table></figure></p>
<h3 id="ETag判断"><a href="#ETag判断" class="headerlink" title="ETag判断"></a>ETag判断</h3><p>ETag是实体标签（Entity Tag）的缩写， 根据实体内容生成的一段hash字符串（类似于MD5或者SHA1之后的结果），可以标识资源的状态。 当资源发送改变时，ETag也随之发生变化。<br><strong>ETag是Web服务端产生的，然后发给浏览器客户端。</strong>浏览器客户端是不用关心Etag是如何产生的。</p>
<p>为什么使用ETag呢？ 主要是为了解决Last-Modified 无法解决的一些问题。</p>
<ol>
<li><p>某些服务器不能精确得到文件的最后修改时间， 这样就无法通过最后修改时间来判断文件是否更新了。</p>
</li>
<li><p>某些文件的修改非常频繁，在秒以下的时间内进行修改. Last-Modified只能精确到秒。</p>
</li>
<li><p>一些文件的最后修改时间改变了，但是内容并未改变。 我们不希望客户端认为这个文件修改了。</p>
</li>
</ol>
<h2 id="与缓存有关的header"><a href="#与缓存有关的header" class="headerlink" title="与缓存有关的header"></a>与缓存有关的header</h2><h3 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h3><p>Cache-Control: max-age=0    以秒为单位<br>If-Modified-Since: Mon, 19 Nov 2012 08:38:01 GMT    缓存文件的最后修改时间。<br>If-None-Match: “0693f67a67cc1:0”    缓存文件的Etag值<br>Cache-Control: no-cache    不使用缓存<br>Pragma: no-cache    不使用缓存</p>
<h3 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h3><p>Cache-Control: public    响应被缓存，并且在多用户间共享，  （公有缓存和私有缓存的区别，请看另一节）<br>Cache-Control: private    响应只能作为私有缓存，不能在用户之间共享<br>Cache-Control:no-cache    提醒浏览器要从服务器提取文档进行验证<br>Cache-Control:no-store    绝对禁止缓存（用于机密，敏感文件）<br>Cache-Control: max-age=60    60秒之后缓存过期（相对时间）<br>Date: Mon, 19 Nov 2012 08:39:00 GMT    当前response发送的时间<br>Expires: Mon, 19 Nov 2012 08:40:01 GMT    缓存过期的时间（绝对时间）<br>Last-Modified: Mon, 19 Nov 2012 08:38:01 GMT    服务器端文件的最后修改时间<br>ETag: “20b1add7ec1cd1:0”    服务器端文件的Etag值<br>如果同时存在cache-control和Expires怎么办呢？<br>浏览器总是优先使用cache-control，如果没有cache-control才考虑Expires  </p>
<h2 id="缓存命中"><a href="#缓存命中" class="headerlink" title="缓存命中"></a>缓存命中</h2><p>按F5刷新浏览器和在地址栏里输入网址然后回车。 这两个行为是不一样的。</p>
<p>按F5刷新浏览器， <strong>浏览器会去Web服务器验证缓存</strong>。</p>
<p>如果是在地址栏输入网址然后回车，<strong>浏览器会”直接使用有效的缓存”, 而不会发http request</strong> 去服务器验证缓存，这种情况叫做<strong>缓存命中</strong>，如下图:</p>
<p><img src="/images/http_protcool/4.PNG" style="width: 300px;"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Client-&gt;Cache:</div><div class="line">Note right of Server:与服务器无关 </div><div class="line">Cache--&gt;Client:使用缓存</div></pre></td></tr></table></figure></p>
<p>如果使用ctrl+f5则会不使用缓存</p>
<h2 id="公有缓存和私有缓存的区别"><a href="#公有缓存和私有缓存的区别" class="headerlink" title="公有缓存和私有缓存的区别"></a>公有缓存和私有缓存的区别</h2><p>Cache-Control: public 指可以公有缓存，可以是数千名用户共享的。</p>
<p>Cache-Control: private 指只支持私有缓存，私有缓存是单个用户专用的。</p>
<h1 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h1><p>Web代理（proxy）服务器是网络的中间实体。代理位于Web客户端和Web服务器之间，扮演“中间人”的角色。代理既是服务器,又是客户端<br><img src="/images/http_protcool/5.PNG" style="width: 300px;"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Client-&gt;Proxy:Request</div><div class="line">Proxy-&gt;Client:Response</div><div class="line">Proxy-&gt;Server:Request</div><div class="line">Server-&gt;Proxy:Response</div></pre></td></tr></table></figure></p>
<h2 id="使用PAC配置代理"><a href="#使用PAC配置代理" class="headerlink" title="使用PAC配置代理"></a>使用PAC配置代理</h2><p>PAC（Proxy Auto Config）文件是一个小型的JavaScript程序的文本文件，后缀为.dat。<br>当浏览器访问网络的时候，会根据PAC文件中的JavaScript函数来选择恰当的代理服务器。</p>
<h2 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h2><p>代理服务器可以获取用户的http Request的内容,因此我们应当注意使用HTTPS协议传输</p>
<h1 id="HTTP状态码"><a href="#HTTP状态码" class="headerlink" title="HTTP状态码"></a>HTTP状态码</h1><p>HTTP状态码的作用是：Web服务器用来告诉客户端，发生了什么事。</p>
<p>状态码位于HTTP Response 的第一行中，会返回一个”三位数字的状态码“和一个“状态消息”。 ”三位数字的状态码“便于程序进行处理， “状态消息”更便于人理解。 </p>
<h2 id="状态码分类"><a href="#状态码分类" class="headerlink" title="状态码分类"></a>状态码分类</h2><table>
<thead>
<tr>
<th>已定义范围</th>
<th>分类</th>
</tr>
</thead>
<tbody>
<tr>
<td>1XX    100-101</td>
<td>信息提示</td>
</tr>
<tr>
<td>2XX    200-206</td>
<td>成功</td>
</tr>
<tr>
<td>3XX    300-305</td>
<td>重定向</td>
</tr>
<tr>
<td>4XX    400-415</td>
<td>客户端错误</td>
</tr>
<tr>
<td>5XX    500-505</td>
<td>服务器错误</td>
</tr>
</tbody>
</table>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/19/摄像头成像原理/" rel="next" title="摄像头成像原理">
                <i class="fa fa-chevron-left"></i> 摄像头成像原理
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/10/21/http-协议笔记/"
           data-title="http 协议笔记" data-url="https://ly11tea.github.io/2016/10/21/http-协议笔记/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Luo" />
          <p class="site-author-name" itemprop="name">Luo</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">19</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ly11tea" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/yu-luo-99" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-question-circle"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#HTTP"><span class="nav-number">1.</span> <span class="nav-text">HTTP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#URL格式"><span class="nav-number">2.</span> <span class="nav-text">URL格式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#http的request消息结构"><span class="nav-number">3.</span> <span class="nav-text">http的request消息结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Request-line"><span class="nav-number">3.1.</span> <span class="nav-text">Request line</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Request-header"><span class="nav-number">3.2.</span> <span class="nav-text">Request header</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Cache-头域"><span class="nav-number">3.2.1.</span> <span class="nav-text">Cache 头域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#If-Modified-Since"><span class="nav-number">3.2.1.1.</span> <span class="nav-text">If-Modified-Since</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#If-None-Match"><span class="nav-number">3.2.1.2.</span> <span class="nav-text">If-None-Match</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Pragma"><span class="nav-number">3.2.1.3.</span> <span class="nav-text">Pragma</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cache-Control"><span class="nav-number">3.2.1.4.</span> <span class="nav-text">Cache-Control</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Client-头域"><span class="nav-number">3.2.2.</span> <span class="nav-text">Client 头域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Accept"><span class="nav-number">3.2.2.1.</span> <span class="nav-text">Accept</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Accept-Encoding："><span class="nav-number">3.2.2.1.0.1.</span> <span class="nav-text">Accept-Encoding：</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Accept-Language"><span class="nav-number">3.2.2.1.1.</span> <span class="nav-text">Accept-Language</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#User-Agent"><span class="nav-number">3.2.2.1.2.</span> <span class="nav-text">User-Agent</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Accept-Charset"><span class="nav-number">3.2.2.1.3.</span> <span class="nav-text">Accept-Charset</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cookie-Login-头域"><span class="nav-number">3.2.2.2.</span> <span class="nav-text">Cookie/Login 头域</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Cookie"><span class="nav-number">3.2.2.2.1.</span> <span class="nav-text">Cookie:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Entity头域"><span class="nav-number">3.2.3.</span> <span class="nav-text">Entity头域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Content-Length"><span class="nav-number">3.2.3.1.</span> <span class="nav-text">Content-Length</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Content-Type"><span class="nav-number">3.2.3.2.</span> <span class="nav-text">Content-Type</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Miscellaneous-头域"><span class="nav-number">3.2.3.2.1.</span> <span class="nav-text">Miscellaneous 头域</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Referer"><span class="nav-number">3.2.3.2.2.</span> <span class="nav-text">Referer:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Transport-头域"><span class="nav-number">3.2.4.</span> <span class="nav-text">Transport 头域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Connection"><span class="nav-number">3.2.4.1.</span> <span class="nav-text">Connection</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Host（发送请求时，该报头域是必需的）"><span class="nav-number">3.2.4.2.</span> <span class="nav-text">Host（发送请求时，该报头域是必需的）</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#http的reponse消息结构"><span class="nav-number">4.</span> <span class="nav-text">http的reponse消息结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#reponse-line"><span class="nav-number">4.1.</span> <span class="nav-text">reponse line</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Response-header"><span class="nav-number">4.2.</span> <span class="nav-text">Response header</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Cache头域"><span class="nav-number">4.2.1.</span> <span class="nav-text">Cache头域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Date"><span class="nav-number">4.2.1.1.</span> <span class="nav-text">Date</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Expires"><span class="nav-number">4.2.1.2.</span> <span class="nav-text">Expires</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vary"><span class="nav-number">4.2.1.3.</span> <span class="nav-text">Vary</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie-Login-头域-1"><span class="nav-number">4.2.2.</span> <span class="nav-text">Cookie/Login 头域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#P3P"><span class="nav-number">4.2.2.1.</span> <span class="nav-text">P3P</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Set-Cookie"><span class="nav-number">4.2.2.2.</span> <span class="nav-text">Set-Cookie</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Entity头域-1"><span class="nav-number">4.2.3.</span> <span class="nav-text">Entity头域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ETag"><span class="nav-number">4.2.3.1.</span> <span class="nav-text">ETag</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Last-Modified"><span class="nav-number">4.2.3.2.</span> <span class="nav-text">Last-Modified:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Content-Type-1"><span class="nav-number">4.2.3.3.</span> <span class="nav-text">Content-Type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Content-Length-1"><span class="nav-number">4.2.3.4.</span> <span class="nav-text">Content-Length</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Miscellaneous-头域-1"><span class="nav-number">4.2.4.</span> <span class="nav-text">Miscellaneous 头域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Server"><span class="nav-number">4.2.4.1.</span> <span class="nav-text">Server:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#X-AspNet-Version"><span class="nav-number">4.2.4.2.</span> <span class="nav-text">X-AspNet-Version:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#X-Powered-By"><span class="nav-number">4.2.4.3.</span> <span class="nav-text">X-Powered-By:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Transport头域"><span class="nav-number">4.2.5.</span> <span class="nav-text">Transport头域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Connection-1"><span class="nav-number">4.2.5.1.</span> <span class="nav-text">Connection</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Location头域"><span class="nav-number">4.2.6.</span> <span class="nav-text">Location头域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Location"><span class="nav-number">4.2.6.1.</span> <span class="nav-text">Location</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Http认证"><span class="nav-number">5.</span> <span class="nav-text">Http认证</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-OAuth认证"><span class="nav-number">5.1.</span> <span class="nav-text">HTTP OAuth认证</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HTTP内容编码和压缩"><span class="nav-number">6.</span> <span class="nav-text">HTTP内容编码和压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#内容编码类型"><span class="nav-number">6.1.</span> <span class="nav-text">内容编码类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#压缩的步骤"><span class="nav-number">6.2.</span> <span class="nav-text">压缩的步骤</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#http缓存"><span class="nav-number">7.</span> <span class="nav-text">http缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#判断缓存新鲜度"><span class="nav-number">7.1.</span> <span class="nav-text">判断缓存新鲜度</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ETag判断"><span class="nav-number">7.1.1.</span> <span class="nav-text">ETag判断</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#与缓存有关的header"><span class="nav-number">7.2.</span> <span class="nav-text">与缓存有关的header</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Request"><span class="nav-number">7.2.1.</span> <span class="nav-text">Request</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Response"><span class="nav-number">7.2.2.</span> <span class="nav-text">Response</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#缓存命中"><span class="nav-number">7.3.</span> <span class="nav-text">缓存命中</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#公有缓存和私有缓存的区别"><span class="nav-number">7.4.</span> <span class="nav-text">公有缓存和私有缓存的区别</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#代理"><span class="nav-number">8.</span> <span class="nav-text">代理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#使用PAC配置代理"><span class="nav-number">8.1.</span> <span class="nav-text">使用PAC配置代理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安全"><span class="nav-number">8.2.</span> <span class="nav-text">安全</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HTTP状态码"><span class="nav-number">9.</span> <span class="nav-text">HTTP状态码</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#状态码分类"><span class="nav-number">9.1.</span> <span class="nav-text">状态码分类</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Luo</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"ly11tea"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

</body>
</html>
